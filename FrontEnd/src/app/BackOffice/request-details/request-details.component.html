<div class="container mt-4 request-details-container">
  <h2 class="text-center mb-4">Project Request - Details</h2>

  <!-- User Information -->
  <div *ngIf="userInfo" class="card mb-4">
    <div class="card-header bg-primary text-white">
      <h3>User Information</h3>
    </div>
    <div class="card-body">
      <p><strong>First Name:</strong> {{ userInfo.first_name }}</p>
      <p><strong>Last Name:</strong> {{ userInfo.last_name }}</p>
      <p><strong>Email:</strong> {{ userInfo.email }}</p>
      <p><strong>Phone Number:</strong> {{ userInfo.phone_number }}</p>
    </div>
  </div>

  <!-- Project Information -->
  <div *ngIf="requestDetails" class="card mb-4">
    <div class="card-header bg-success text-white">
      <h3>Project Information</h3>
    </div>
    <div class="card-body">
      <p><strong>Project Name:</strong> {{ requestDetails.projectName }}</p>
      <p><strong>Estimated Budget:</strong> {{ requestDetails.estimated_budget }} TND</p>
      <p><strong>Estimated Duration:</strong> {{ requestDetails.estimated_duration }} months</p>
      <p><strong>Description:</strong> {{ requestDetails.description }}</p>
      <p><strong>Location:</strong> {{ requestDetails.geographic_location }}</p>
      <p><strong>Status:</strong> <span [ngClass]="{
          'text-success': requestDetails.status === 'Approved',
          'text-danger': requestDetails.status === 'Rejected',
          'text-warning': requestDetails.status === 'Pending'
        }">
        {{ requestDetails.status }}
      </span></p>
    </div>
  </div>

  <!-- Google Maps Map -->
  <div *ngIf="requestDetails?.geographic_location" id="map" class="mb-4" style="width: 100%; height: 400px;"></div>

  <!-- Action Buttons -->
  <div class="text-center">
    <button 
      (click)="updateStatus(requestDetails.id_projet, 'Approved')" 
      class="btn btn-success mx-2"
      [disabled]="requestDetails.status === 'Approved' || requestDetails.status === 'Rejected'">
      ✔ Approve
    </button>

    <button 
      (click)="updateStatus(requestDetails.id_projet, 'Rejected')" 
      class="btn btn-danger mx-2"
      [disabled]="requestDetails.status === 'Approved' || requestDetails.status === 'Rejected'">
      ✖ Reject
    </button>

    <button (click)="goBack()" class="btn btn-secondary mx-2">Back to List</button>
  </div>
</div>
